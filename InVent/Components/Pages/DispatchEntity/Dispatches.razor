@page "/Dispatches"
@using InVent.Components.Pages.Internals
@using InVent.Data.Models
@inherits BaseDispatchComponent

<div class="entity-container">
    <MudIconButton OnClick="e=>this.OpenAddDialog(e)"
                   Icon="@Icons.Material.Filled.Add"
                   Variant="Variant.Filled"
                   DropShadow="false"
                   Size="Size.Small"
                   Style="width:10%"
                   Color="Color.Info"></MudIconButton>
    <MudTable T="Dispatch"
              Items="@this.DispatchesList"
              @ref="this.Table"
              RowClass="cursor-pointer"
              Hover="true"
              Loading="@this.Loading"
              OnRowClick="e=>this.OpenViewDialog(e)"
              Breakpoint="Breakpoint.None"
              GroupHeaderStyle="background-color: #eee;"
              Outlined
              Striped
              LoadingProgressColor="Color.Info">
        <NoRecordsContent>
            <MudText>اینجا هیچی نیست.</MudText>
        </NoRecordsContent>
        <HeaderContent>
            <MudTh>
                <MudText Typo="Typo.body2">
                    شماره پروژه
                </MudText>
            </MudTh>
            <MudTh>
                <MudText Typo="Typo.body2">
                    شماره بوکینگ
                </MudText>
            </MudTh>
            <MudTh>
                <MudText Typo="Typo.body2">
                    تعداد بسته
                </MudText>
            </MudTh>            
            <MudTh></MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="شماره پروژه">@context.Booking?.Project?.Number</MudTd>
            <MudTd DataLabel="شماره بوکینگ">@context.Booking?.Number</MudTd>
            <MudTd DataLabel="تعداد بسته">@context.PackageCount</MudTd>
            <MudTd Style="width:30%;text-align:end">
                <MudIconButton Icon="@Icons.Material.Filled.Edit"
                               OnClick="(e)=>this.OpenEditDialog(e,context)"
                               Color="Color.Info">
                </MudIconButton>
                <MudIconButton Icon="@Icons.Material.Filled.Delete"
                               OnClick="(e)=>this.OpenDeleteDialog(e,context)"
                               Color="Color.Error">
                </MudIconButton>
            </MudTd>
        </RowTemplate>
    </MudTable>
</div>